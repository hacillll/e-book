<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>íšŒê³„ í•µì‹¬ ìš”ì•½ e-Book</title>
    
    <!-- Tailwind CSS (ìŠ¤íƒ€ì¼) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (ë¡œì§) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (JSX ë³€í™˜) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ ë° ì•ˆì „ ì˜ì—­ ì„¤ì • */
        body {
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom, 20px);
        }
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (ê¹”ë”í•œ UI) */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        @keyframes slideInLeft {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        .animate-slide-in-left {
            animation: slideInLeft 0.3s ease-out forwards;
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-down {
            animation: fadeInDown 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 antialiased h-[100dvh] w-full overflow-hidden">
    <div id="root" class="h-full w-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ (Lucide ì•„ì´ì½˜ SVG ì§ì ‘ êµ¬í˜„) ---
        const Icon = ({ path, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            Menu: (props) => <Icon {...props} path={<><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></>} />,
            X: (props) => <Icon {...props} path={<><path d="M18 6 6 18"/><path d="m6 6 12 12"/></>} />,
            ChevronLeft: (props) => <Icon {...props} path={<path d="m15 18-6-6 6-6"/>} />,
            ChevronRight: (props) => <Icon {...props} path={<path d="m9 18 6-6-6-6"/>} />,
            Book: (props) => <Icon {...props} path={<><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></>} />,
            Type: (props) => <Icon {...props} path={<><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" x2="15" y1="20" y2="20"/><line x1="12" x2="12" y1="4" y2="20"/></>} />,
            Star: (props) => <Icon {...props} path={<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" fill={props.fill || "none"} />} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></>} />,
            Share2: (props) => <Icon {...props} path={<><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></>} />,
        };

        const AccountingEbook = () => {
            const [currentChapter, setCurrentChapter] = useState(0);
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [fontSize, setFontSize] = useState(16);
            const [showSettings, setShowSettings] = useState(false);
            const [toastMessage, setToastMessage] = useState(null);
            const scrollRef = useRef(null);

            // --- ì±•í„° ë°ì´í„° ---
            const chapters = [
                {
                    id: 0,
                    title: "í‘œì§€",
                    type: "cover",
                    content: (
                        <div className="flex flex-col items-center justify-center h-full text-center space-y-8 p-6">
                            <div className="w-24 h-24 bg-amber-100 rounded-full flex items-center justify-center mb-4 shadow-inner">
                                <Icons.Book className="w-12 h-12 text-amber-700" />
                            </div>
                            <div>
                                <h1 className="text-3xl font-bold text-stone-800 mb-2 leading-tight">íšŒê³„ì˜ ìˆœí™˜ê³¼<br/>í•µì‹¬ ì²˜ë¦¬</h1>
                                <p className="text-stone-500">ì¤‘ê¸‰ ì¬ë¬´íšŒê³„ í•µì‹¬ ìš”ì•½ ë…¸íŠ¸</p>
                            </div>
                            <div className="w-full h-px bg-stone-300 my-4"></div>
                            <div className="text-sm text-stone-600 space-y-2">
                                <p>Part II. íšŒê³„ì˜ ìˆœí™˜ ê³¼ì •</p>
                                <p>Part III. ê³„ì •ê³¼ëª©ë³„ íšŒê³„ì²˜ë¦¬</p>
                            </div>
                            <button 
                                onClick={() => setCurrentChapter(1)}
                                className="mt-8 px-8 py-3 bg-amber-700 text-white rounded-full font-semibold shadow-lg hover:bg-amber-800 transition-colors animate-pulse active:scale-95 transform"
                            >
                                í•™ìŠµ ì‹œì‘í•˜ê¸°
                            </button>
                        </div>
                    )
                },
                {
                    id: 1,
                    title: "ì œ1ì¥. í˜„ê¸ˆ ë° ìˆ˜ì·¨ì±„ê¶Œ",
                    content: (
                        <div className="space-y-6">
                            <Section title="1. í˜„ê¸ˆ ë° í˜„ê¸ˆì„±ìì‚°">
                                <p>ê¸°ì—…ì˜ ìœ ë™ì„±ì„ ë‹´ë‹¹í•˜ëŠ” ê°€ì¥ ê¸°ì´ˆì ì¸ í•­ëª©ì…ë‹ˆë‹¤.</p>
                                <ul className="list-disc pl-5 space-y-2 mt-2">
                                    <li><strong>í˜„ê¸ˆ:</strong> í†µí™”(ì§€í, ë™ì „), í†µí™”ëŒ€ìš©ì¦ê¶Œ(ìˆ˜í‘œ ë“±).</li>
                                    <li>
                                        <strong>í˜„ê¸ˆì„±ìì‚°:</strong> ì·¨ë“ ë‹¹ì‹œ <span className="bg-yellow-200 px-1">ë§Œê¸°ê°€ 3ê°œì›” ì´ë‚´</span>ì¸ ì´ˆë‹¨ê¸° ê¸ˆìœµìƒí’ˆ.
                                        <div className="text-sm text-stone-500 mt-1">*í° ê±°ë˜ë¹„ìš© ì—†ì´ í˜„ê¸ˆí™” ê°€ëŠ¥í•˜ë©° ì´ììœ¨ ë³€ë™ ìœ„í—˜ì´ ë‚®ì•„ì•¼ í•¨.</div>
                                    </li>
                                </ul>
                            </Section>

                            <Section title="2. ì€í–‰ê³„ì •ì¡°ì •í‘œ">
                                <p>íšŒì‚¬ ì¥ë¶€ì™€ ì€í–‰ í†µì¥ ì”ì•¡ì˜ ë¶ˆì¼ì¹˜ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.</p>
                                <div className="bg-white p-4 rounded-lg border border-stone-200 mt-2 shadow-sm">
                                    <h4 className="font-bold text-amber-700 mb-2">í•µì‹¬ í¬ì¸íŠ¸</h4>
                                    <p>íšŒì‚¬ ì¸¡ ì˜¤ë¥˜ë‚˜ ë¯¸ê¸°ì… ì‚¬í•­(ìˆ˜ìˆ˜ë£Œ, ë¶€ë„ìˆ˜í‘œ ë“±)ì€ ë°˜ë“œì‹œ <span className="font-bold text-red-500">ìˆ˜ì •ë¶„ê°œ</span>ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                                </div>
                            </Section>

                            <Section title="3. ë§¤ì¶œì±„ê¶Œê³¼ íŒ©í† ë§">
                                <p>ë§¤ì¶œì±„ê¶Œì„ ë§Œê¸° ì „ì— ê¸ˆìœµê¸°ê´€ì— ë„˜ê²¨ í˜„ê¸ˆí™”í•˜ëŠ” ê²ƒì„ íŒ©í† ë§ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>
                                <ul className="list-disc pl-5 space-y-2 mt-2">
                                    <li><strong>ë§¤ê°ê±°ë˜:</strong> ìœ„í—˜/ë³´ìƒ ì´ì „ë¨ â†’ ì±„ê¶Œ ì œê±° (ì²˜ë¶„ì†ì‹¤).</li>
                                    <li><strong>ì°¨ì…ê±°ë˜:</strong> ìœ„í—˜/ë³´ìƒ ìœ ì§€ë¨ â†’ ì±„ê¶Œ ìœ ì§€ (ë‹¨ê¸°ì°¨ì…ê¸ˆ ì¸ì‹).</li>
                                </ul>
                            </Section>

                            <Section title="4. ëŒ€ì†ìƒê° (ì¶©ë‹¹ê¸ˆì„¤ì •ë²•)">
                                <p>K-IFRSëŠ” ì§ì ‘ìƒê°ë²•ì´ ì•„ë‹Œ ì¶©ë‹¹ê¸ˆì„¤ì •ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                                <div className="bg-stone-800 text-stone-100 p-3 rounded-md font-mono text-sm mt-2 overflow-x-auto whitespace-nowrap">
                                    (ì°¨) ëŒ€ì†ìƒê°ë¹„ XXX / (ëŒ€) ëŒ€ì†ì¶©ë‹¹ê¸ˆ XXX
                                </div>
                                <p className="text-sm mt-2 text-stone-600">ì‹¤ì œ ëª» ë°›ê²Œ ë˜ë©´ ì¶©ë‹¹ê¸ˆê³¼ ë¨¼ì € ìƒê³„í•©ë‹ˆë‹¤.</p>
                            </Section>
                        </div>
                    )
                },
                {
                    id: 2,
                    title: "ì œ2ì¥. ìœ í˜•ìì‚°",
                    content: (
                        <div className="space-y-6">
                            <Section title="1. ì·¨ë“ì›ê°€ ê²°ì •">
                                <p>êµ¬ì…ê°€ê²©ì— <strong>ì·¨ë“ ë¶€ëŒ€ë¹„ìš©</strong>(ìš´ë°˜ë¹„, ì„¤ì¹˜ë¹„, ì·¨ë“ì„¸ ë“±)ì„ ëª¨ë‘ ë”í•©ë‹ˆë‹¤.</p>
                                <p className="mt-2 text-sm text-amber-800 bg-amber-50 p-2 rounded">ğŸ’¡ í† ì§€ êµ¬ì… ì‹œ ì² ê±° ë¹„ìš©ì€ í† ì§€ ì›ê°€ì— í¬í•¨ë©ë‹ˆë‹¤.</p>
                            </Section>

                            <Section title="2. ìë³¸ì  ì§€ì¶œ vs ìˆ˜ìµì  ì§€ì¶œ">
                                <div className="grid grid-cols-2 gap-2 mt-2 text-center">
                                    <div className="bg-blue-50 p-3 rounded-lg border border-blue-100">
                                        <div className="font-bold text-blue-800">ìë³¸ì  ì§€ì¶œ</div>
                                        <div className="text-sm">ê°€ì¹˜ ì¦ê°€<br/>ë‚´ìš©ì—°ìˆ˜ ì—°ì¥</div>
                                        <div className="text-xs text-blue-600 mt-1">â†’ ìì‚° ì²˜ë¦¬</div>
                                    </div>
                                    <div className="bg-red-50 p-3 rounded-lg border border-red-100">
                                        <div className="font-bold text-red-800">ìˆ˜ìµì  ì§€ì¶œ</div>
                                        <div className="text-sm">í˜„ìƒ ìœ ì§€<br/>ë‹¨ìˆœ ìˆ˜ë¦¬</div>
                                        <div className="text-xs text-red-600 mt-1">â†’ ë¹„ìš© ì²˜ë¦¬</div>
                                    </div>
                                </div>
                            </Section>

                            <Section title="3. ê°ê°€ìƒê° ë°©ë²•">
                                <ul className="list-disc pl-5 space-y-2">
                                    <li><strong>ì •ì•¡ë²•:</strong> ë§¤ë…„ ë™ì¼ ê¸ˆì•¡.</li>
                                    <li><strong>ì •ë¥ ë²•:</strong> ì´ˆê¸°ì— ë§ì´ ìƒê°.</li>
                                    <li><strong>ìƒì‚°ëŸ‰ë¹„ë¡€ë²•:</strong> ì‹¤ì œ ì“´ ë§Œí¼ ìƒê°.</li>
                                </ul>
                            </Section>

                            <Section title="4. ì²˜ë¶„ ì†ìµ ê³„ì‚°">
                                <div className="bg-white p-4 rounded-lg border border-stone-300 shadow-sm text-center font-semibold text-lg">
                                    ì²˜ë¶„ê¸ˆì•¡ - ì¥ë¶€ê¸ˆì•¡<br/>
                                    <span className="text-sm font-normal text-stone-500">(ì·¨ë“ì›ê°€ - ê°ê°€ìƒê°ëˆ„ê³„ì•¡)</span>
                                </div>
                            </Section>
                        </div>
                    )
                },
                {
                    id: 3,
                    title: "ì œ3ì¥. ë¬´í˜•ìì‚°ê³¼ íˆ¬ìë¶€ë™ì‚°",
                    content: (
                        <div className="space-y-6">
                            <Section title="1. ì—°êµ¬ê°œë°œë¹„ (R&D)">
                                <p>ì—°êµ¬ë‹¨ê³„ì™€ ê°œë°œë‹¨ê³„ë¥¼ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.</p>
                                <div className="flex flex-col space-y-2 mt-2">
                                    <div className="flex items-center">
                                        <span className="w-20 font-bold text-stone-600">ì—°êµ¬ë‹¨ê³„</span>
                                        <span className="flex-1">â†’ ë¯¸ë˜ íš¨ìµ ë¶ˆí™•ì‹¤ â†’ <span className="text-red-600">ë¹„ìš©</span></span>
                                    </div>
                                    <div className="flex items-center">
                                        <span className="w-20 font-bold text-stone-600">ê°œë°œë‹¨ê³„</span>
                                        <span className="flex-1">â†’ ì‹¤í˜„ ê°€ëŠ¥ì„± ì…ì¦ â†’ <span className="text-blue-600">ìì‚°</span></span>
                                    </div>
                                </div>
                            </Section>

                            <Section title="2. ì˜ì—…ê¶Œ (Goodwill)">
                                <p>í•©ë³‘ ì‹œ ìˆœìì‚° ê³µì •ê°€ì¹˜ë³´ë‹¤ ë” ì¤€ ëˆì…ë‹ˆë‹¤.</p>
                                <ul className="list-disc pl-5 space-y-1 mt-2">
                                    <li>ë‚´ë¶€ì°½ì¶œ ì˜ì—…ê¶Œì€ ì¸ì • ì•ˆ í•¨.</li>
                                    <li><strong>ìƒê°í•˜ì§€ ì•Šê³ </strong> ë§¤ë…„ ì†ìƒê²€ì‚¬ë§Œ ìˆ˜í–‰.</li>
                                </ul>
                            </Section>

                            <Section title="3. íˆ¬ìë¶€ë™ì‚° í‰ê°€">
                                <p>ì„ëŒ€ìˆ˜ìµì´ë‚˜ ì‹œì„¸ì°¨ìµ ëª©ì ì˜ ë¶€ë™ì‚°ì…ë‹ˆë‹¤.</p>
                                <div className="mt-2 p-3 bg-stone-100 rounded text-sm">
                                    <strong>ê³µì •ê°€ì¹˜ëª¨í˜•</strong> ì„ íƒ ì‹œ ê°ê°€ìƒê°ì„ í•˜ì§€ ì•Šê³ , í‰ê°€ì†ìµì„ <span className="font-bold text-red-600">ë‹¹ê¸°ì†ìµ</span>ì— ë°˜ì˜í•©ë‹ˆë‹¤.
                                </div>
                            </Section>
                        </div>
                    )
                },
                {
                    id: 4,
                    title: "ì œ4ì¥. ê¸ˆìœµë¶€ì±„ (ì‚¬ì±„)",
                    content: (
                        <div className="space-y-6">
                            <Section title="1. ì‚¬ì±„ì˜ ë°œí–‰">
                                <p>í‘œì‹œì´ììœ¨ê³¼ ì‹œì¥ì´ììœ¨ì˜ ì°¨ì´ì— ë”°ë¼ ë°œí–‰ê°€ì•¡ì´ ê²°ì •ë©ë‹ˆë‹¤.</p>
                                <div className="overflow-x-auto mt-2">
                                    <table className="w-full text-sm text-left text-stone-600">
                                        <thead className="bg-stone-200 text-stone-700">
                                            <tr>
                                                <th className="p-2 whitespace-nowrap">ì´ììœ¨ ê´€ê³„</th>
                                                <th className="p-2 whitespace-nowrap">ë°œí–‰ ìœ í˜•</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr className="border-b border-stone-200">
                                                <td className="p-2">í‘œì‹œ = ì‹œì¥</td>
                                                <td className="p-2">ì•¡ë©´ë°œí–‰</td>
                                            </tr>
                                            <tr className="border-b border-stone-200">
                                                <td className="p-2">í‘œì‹œ &lt; ì‹œì¥</td>
                                                <td className="p-2 text-blue-600 font-bold">í• ì¸ë°œí–‰</td>
                                            </tr>
                                            <tr>
                                                <td className="p-2">í‘œì‹œ &gt; ì‹œì¥</td>
                                                <td className="p-2 text-red-600 font-bold">í• ì¦ë°œí–‰</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </Section>

                            <Section title="2. ìœ íš¨ì´ììœ¨ë²•">
                                <p>ì‚¬ì±„ì˜ ì¥ë¶€ê¸ˆì•¡ì„ ë§¤ê¸° ì¬ê³„ì‚°í•˜ëŠ” í•µì‹¬ ë¡œì§ì…ë‹ˆë‹¤.</p>
                                <div className="bg-white border border-amber-200 rounded-lg p-3 space-y-2 mt-2">
                                    <div className="flex justify-between border-b border-stone-100 pb-1">
                                        <span>ì´ìë¹„ìš©</span>
                                        <span className="font-bold text-right">= ê¸°ì´ˆì¥ë¶€ Ã— ìœ íš¨ì´ììœ¨</span>
                                    </div>
                                    <div className="flex justify-between border-b border-stone-100 pb-1">
                                        <span>í˜„ê¸ˆì§€ê¸‰</span>
                                        <span className="font-bold text-right">= ì•¡ë©´ê¸ˆì•¡ Ã— í‘œì‹œì´ììœ¨</span>
                                    </div>
                                    <div className="flex justify-between text-amber-700">
                                        <span>ìƒê°ì•¡</span>
                                        <span className="font-bold text-right">= ì´ìë¹„ìš© - í˜„ê¸ˆì§€ê¸‰</span>
                                    </div>
                                </div>
                            </Section>
                        </div>
                    )
                },
                {
                    id: 5,
                    title: "ì œ5ì¥. ê¸ˆìœµìì‚°",
                    content: (
                        <div className="space-y-6">
                            <Section title="1. ê¸ˆìœµìì‚°ì˜ ë¶„ë¥˜ (3ê°€ì§€)">
                                <div className="space-y-3">
                                    <Card 
                                        title="FVPL (ë‹¹ê¸°ì†ìµ)" 
                                        desc="ë‹¨íƒ€ ë§¤ë§¤ ëª©ì . í‰ê°€ì†ìµì€ ë‹¹ê¸°ìˆœì´ìµ(NI)ìœ¼ë¡œ ì§í–‰." 
                                        color="red"
                                    />
                                    <Card 
                                        title="FVOCI (ê¸°íƒ€í¬ê´„ì†ìµ)" 
                                        desc="ì¥ê¸° íˆ¬ì ëª©ì . í‰ê°€ì†ìµì€ ìë³¸(OCI)ì— ìˆ¨ê²¨ë‘ ." 
                                        color="blue"
                                    />
                                    <Card 
                                        title="AC (ìƒê°í›„ì›ê°€)" 
                                        desc="ë§Œê¸° ë³´ìœ  ì±„ê¶Œ. í‰ê°€ëŠ” ì•ˆ í•˜ê³  ì´ìë§Œ ë°›ìŒ." 
                                        color="stone"
                                    />
                                </div>
                            </Section>
                
                            <Section title="2. ê´€ê³„ê¸°ì—…íˆ¬ì (ì§€ë¶„ë²•)">
                                <p>ì§€ë¶„ìœ¨ 20% ì´ìƒ ë“± <strong>ìœ ì˜ì ì¸ ì˜í–¥ë ¥</strong>ì´ ìˆì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                                <div className="mt-2 bg-stone-50 p-3 rounded-lg text-sm border-l-4 border-green-500">
                                    <p><strong>ìƒëŒ€ë°©ì´ ëˆ ë²Œë©´(ì´ìµ):</strong> <br/>ë‚´ ìì‚° ì¦ê°€ (ì§€ë¶„ë²•ì´ìµ)</p>
                                    <div className="h-px bg-stone-200 my-2"></div>
                                    <p><strong>ë°°ë‹¹ê¸ˆ ë°›ìœ¼ë©´:</strong> <br/>ë‚´ ìì‚° ê°ì†Œ (ì›ê¸ˆ íšŒìˆ˜ ê°œë…)</p>
                                </div>
                            </Section>
                        </div>
                    )
                },
                {
                    id: 6,
                    title: "í•™ìŠµ ì™„ë£Œ",
                    type: "finish",
                    content: (
                        <div className="flex flex-col items-center justify-center h-full text-center space-y-6 p-6">
                            <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center shadow-sm">
                                <Icons.CheckCircle className="w-10 h-10 text-green-600" />
                            </div>
                            <div>
                                <h2 className="text-2xl font-bold text-stone-800">ëª¨ë“  ë‚´ìš©ì„<br/>í™•ì¸í–ˆìŠµë‹ˆë‹¤!</h2>
                                <p className="text-stone-500 mt-2">í•„ìš”í•  ë•Œë§ˆë‹¤ ì±…ê°ˆí”¼ ê¸°ëŠ¥ì„ ì´ìš©í•´<br/>ë‹¤ì‹œ í•™ìŠµí•´ë³´ì„¸ìš”.</p>
                            </div>
                            <button 
                                onClick={() => setCurrentChapter(0)}
                                className="px-6 py-2 border-2 border-stone-300 text-stone-600 rounded-full font-medium hover:bg-stone-100 transition-colors"
                            >
                                í‘œì§€ë¡œ ëŒì•„ê°€ê¸°
                            </button>
                        </div>
                    )
                }
            ];

            // --- ìœ í‹¸ë¦¬í‹° ì»´í¬ë„ŒíŠ¸ ---
            function Section({ title, children }) {
                return (
                    <div className="mb-8">
                        <h3 className="text-xl font-bold text-stone-800 border-b-2 border-amber-200 inline-block mb-3 pb-1 pr-4">
                            {title}
                        </h3>
                        <div className="text-stone-700 leading-relaxed break-keep">
                            {children}
                        </div>
                    </div>
                );
            }

            function Card({ title, desc, color }) {
                const colors = {
                    red: "bg-red-50 border-red-200 text-red-900",
                    blue: "bg-blue-50 border-blue-200 text-blue-900",
                    stone: "bg-stone-100 border-stone-200 text-stone-900",
                };
                return (
                    <div className={`p-3 rounded-lg border ${colors[color]}`}>
                        <div className="font-bold text-sm mb-1">{title}</div>
                        <div className="text-sm opacity-90 break-keep">{desc}</div>
                    </div>
                )
            }

            // --- ë¡œì§ êµ¬í˜„ ---
            useEffect(() => {
                const savedChapter = localStorage.getItem('accounting-ebook-chapter');
                if (savedChapter) {
                    setCurrentChapter(parseInt(savedChapter, 10));
                }
            }, []);

            useEffect(() => {
                if (scrollRef.current) {
                    scrollRef.current.scrollTop = 0;
                }
                localStorage.setItem('accounting-ebook-chapter', currentChapter);
            }, [currentChapter]);

            const handleNext = () => {
                if (currentChapter < chapters.length - 1) setCurrentChapter(prev => prev + 1);
            };

            const handlePrev = () => {
                if (currentChapter > 0) setCurrentChapter(prev => prev - 1);
            };

            const handleShare = async () => {
                if (navigator.share) {
                    try {
                        await navigator.share({
                            title: 'íšŒê³„ í•µì‹¬ ìš”ì•½ e-Book',
                            text: 'íšŒê³„ì˜ ìˆœí™˜ê³¼ í•µì‹¬ ì²˜ë¦¬ ìš”ì•½ ë…¸íŠ¸ì…ë‹ˆë‹¤.',
                            url: window.location.href,
                        });
                        showToast("ê³µìœ  ì°½ì„ ì—´ì—ˆìŠµë‹ˆë‹¤.");
                    } catch (error) {
                        // ì‚¬ìš©ìê°€ ì·¨ì†Œí•¨
                    }
                } else {
                    try {
                        await navigator.clipboard.writeText(window.location.href);
                        showToast("ì£¼ì†Œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    } catch (err) {
                        showToast("ì£¼ì†Œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                    }
                }
            };

            const showToast = (msg) => {
                setToastMessage(msg);
                setTimeout(() => setToastMessage(null), 3000);
            };

            return (
                <div className="flex flex-col h-full bg-stone-50 text-stone-800 font-sans overflow-hidden select-none">
                    
                    {/* í—¤ë” */}
                    <header className="flex-none bg-white border-b border-stone-200 px-4 py-3 flex items-center justify-between shadow-sm z-10">
                        <div className="flex items-center space-x-2">
                            <button onClick={() => setIsMenuOpen(true)} className="p-2 -ml-2 hover:bg-stone-100 rounded-full active:bg-stone-200">
                                <Icons.Menu className="w-6 h-6 text-stone-600" />
                            </button>
                            <h1 className="font-bold text-base truncate max-w-[160px] md:max-w-xs text-stone-800">
                                {chapters[currentChapter].type === 'cover' ? 'íšŒê³„ í•µì‹¬ ìš”ì•½' : chapters[currentChapter].title}
                            </h1>
                        </div>
                        <div className="flex items-center space-x-1">
                            <button 
                                onClick={handleShare}
                                className="p-2 hover:bg-stone-100 rounded-full active:bg-stone-200 text-stone-600"
                            >
                                <Icons.Share2 className="w-5 h-5" />
                            </button>
                            <button 
                                onClick={() => setShowSettings(!showSettings)} 
                                className="p-2 hover:bg-stone-100 rounded-full active:bg-stone-200 text-stone-600"
                            >
                                <Icons.Type className="w-6 h-6" />
                            </button>
                        </div>
                    </header>

                    {/* í† ìŠ¤íŠ¸ ë©”ì‹œì§€ */}
                    {toastMessage && (
                        <div className="absolute top-16 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white text-sm py-2 px-4 rounded-full shadow-lg z-50 animate-fade-in transition-opacity">
                            {toastMessage}
                        </div>
                    )}

                    {/* ì„¤ì • íŒì—… */}
                    {showSettings && (
                        <div className="absolute top-14 right-4 bg-white shadow-xl border border-stone-200 rounded-lg p-4 w-64 z-20 animate-fade-in-down">
                            <div className="text-sm font-bold mb-2 text-stone-500">ê¸€ì í¬ê¸°</div>
                            <div className="flex items-center justify-between bg-stone-100 rounded-lg p-1">
                                <button 
                                    onClick={() => setFontSize(Math.max(14, fontSize - 2))}
                                    className="p-2 w-full text-center hover:bg-white rounded shadow-sm"
                                >
                                    ì‘ê²Œ
                                </button>
                                <span className="px-4 font-bold">{fontSize}</span>
                                <button 
                                    onClick={() => setFontSize(Math.min(24, fontSize + 2))}
                                    className="p-2 w-full text-center hover:bg-white rounded shadow-sm"
                                >
                                    í¬ê²Œ
                                </button>
                            </div>
                        </div>
                    )}

                    {/* ë©”ë‰´ ì‚¬ì´ë“œë°” */}
                    {isMenuOpen && (
                        <div className="fixed inset-0 z-50 flex">
                            <div className="w-72 bg-white h-full shadow-2xl flex flex-col animate-slide-in-left">
                                <div className="p-4 border-b border-stone-100 flex justify-between items-center bg-amber-50 h-14">
                                    <span className="font-bold text-amber-800">ëª©ì°¨</span>
                                    <button onClick={() => setIsMenuOpen(false)} className="p-2 -mr-2"><Icons.X className="w-5 h-5 text-amber-800" /></button>
                                </div>
                                <div className="flex-1 overflow-y-auto p-2 pb-safe">
                                    {chapters.map((chapter) => (
                                        <button
                                            key={chapter.id}
                                            onClick={() => {
                                                setCurrentChapter(chapter.id);
                                                setIsMenuOpen(false);
                                            }}
                                            className={`w-full text-left p-4 rounded-lg mb-1 text-sm transition-colors ${
                                                currentChapter === chapter.id 
                                                ? 'bg-amber-100 text-amber-900 font-bold' 
                                                : 'hover:bg-stone-50 text-stone-600'
                                            }`}
                                        >
                                            <div className="flex items-center">
                                                <span className="flex-1 truncate">{chapter.id === 0 ? "í‘œì§€" : chapter.title}</span>
                                                {currentChapter === chapter.id && <Icons.CheckCircle className="w-4 h-4 text-amber-600 ml-2" />}
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                            <div className="flex-1 bg-black/30 backdrop-blur-sm" onClick={() => setIsMenuOpen(false)}></div>
                        </div>
                    )}

                    {/* ë©”ì¸ ì½˜í…ì¸  */}
                    <main 
                        ref={scrollRef}
                        className="flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-6 pb-24 mx-auto w-full max-w-2xl bg-stone-50 scroll-smooth"
                        style={{ fontSize: `${fontSize}px` }}
                    >
                        <div className="bg-white p-5 md:p-10 shadow-sm border border-stone-100 min-h-[80vh] rounded-xl relative transition-all duration-300">
                            {/* ë¶ë§ˆí¬ ë¦¬ë³¸ */}
                            <div className="absolute top-0 right-4">
                                <div className="w-8 h-10 bg-red-600 rounded-b-lg shadow-md flex items-end justify-center pb-2" title="í˜„ì¬ í˜ì´ì§€ ì €ì¥ë¨">
                                    <Icons.Star className="w-3 h-3 text-white" fill="white" />
                                </div>
                            </div>

                            <div className="animate-fade-in mt-2">
                                {chapters[currentChapter].content}
                            </div>
                        </div>
                    </main>

                    {/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}
                    <footer className="flex-none bg-white border-t border-stone-200 p-4 pb-safe flex items-center justify-between max-w-2xl mx-auto w-full absolute bottom-0 left-0 right-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                        <button 
                            onClick={handlePrev} 
                            disabled={currentChapter === 0}
                            className={`flex items-center space-x-1 px-4 py-3 rounded-xl transition-colors active:scale-95 transform ${
                                currentChapter === 0 ? 'text-stone-300' : 'text-stone-700 hover:bg-stone-100 active:bg-stone-200'
                            }`}
                        >
                            <Icons.ChevronLeft className="w-5 h-5" />
                            <span className="font-medium text-sm">ì´ì „</span>
                        </button>

                        <span className="text-xs font-medium text-stone-400">
                            {currentChapter} / {chapters.length - 1}
                        </span>

                        <button 
                            onClick={handleNext} 
                            disabled={currentChapter === chapters.length - 1}
                            className={`flex items-center space-x-1 px-4 py-3 rounded-xl transition-colors active:scale-95 transform ${
                                currentChapter === chapters.length - 1 ? 'text-stone-300' : 'text-stone-700 hover:bg-stone-100 active:bg-stone-200'
                            }`}
                        >
                            <span className="font-medium text-sm">ë‹¤ìŒ</span>
                            <Icons.ChevronRight className="w-5 h-5" />
                        </button>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AccountingEbook />);
    </script>
</body>
</html>